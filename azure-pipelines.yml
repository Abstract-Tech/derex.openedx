variables:
  - group: Docker credentials
  - group: Transifex credentials
  - name: DOCKER_BUILDKIT
    value: '1'
  - name: DOCKER_COMMAND
    value: 'docker build --build-arg BUILDKIT_INLINE_CACHE=1'


jobs:
- job: Build_hawthorn_image
  timeoutInMinutes: 180
  pool:
    vmImage: 'ubuntu-18.04'
  variables:
    - name: DOCKER_IMAGES_SLUG
      value: hawthorn
    - name: DOCKER_OPTS
      value: --build-arg PYTHON_VERSION=2.7 --build-arg EDX_PLATFORM_VERSION=open-release/hawthorn.master
  steps:
    - template: build-and-push-images.yml

- job: Build_ironwood_image
  timeoutInMinutes: 180
  pool:
    vmImage: 'ubuntu-18.04'

  variables:
    - name: DOCKER_IMAGES_SLUG
      value: ironwood
    - name: DOCKER_OPTS
      value: --build-arg PYTHON_VERSION=2.7 --build-arg EDX_PLATFORM_VERSION=open-release/ironwood.master
  steps:
    - template: build-and-push-images.yml


- job: Build_juniper_image
  timeoutInMinutes: 180
  pool:
    vmImage: 'ubuntu-18.04'

  variables:
    - name: DOCKER_IMAGES_SLUG
      value: juniper
    - name: DOCKER_OPTS
      value:
  steps:
    - template: build-and-push-images.yml
